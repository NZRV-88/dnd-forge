import React from 'react';
import { useFrameColor } from '@/contexts/FrameColorContext';

interface DynamicFrameProps {
  frameType: 'ability' | 'health' | 'ac' | 'initiative' | 'prof' | 'st' | 'st-mode' | 'ps-mode' | 'senses' | 'skills' | 'action' | 'condition';
  color?: string;
  size?: 'small' | 'medium' | 'large' | 'custom';
  className?: string;
  style?: React.CSSProperties;
  children?: React.ReactNode;
  stretchMode?: 'full' | 'left-only' | 'right-only' | 'center-stretch';
}

const FRAME_COLORS = {
  gold: '#B59E54',
  silver: '#C0C0C0',
  bronze: '#CD7F32',
  copper: '#B87333',
  steel: '#71797E',
  red: '#DC2626',
  blue: '#2563EB',
  green: '#16A34A',
  purple: '#9333EA',
  orange: '#EA580C',
  pink: '#EC4899',
  cyan: '#0891B2',
  lime: '#65A30D',
  indigo: '#4F46E5',
  teal: '#0D9488',
  emerald: '#059669',
  rose: '#E11D48',
  amber: '#D97706',
  violet: '#7C3AED',
  fuchsia: '#C026D3',
  sky: '#0284C7',
  stone: '#78716C',
  neutral: '#6B7280',
  zinc: '#71717A',
  slate: '#64748B',
  gray: '#6B7280',
  cool: '#6B7280',
  warm: '#78716C',
  true: '#FFFFFF',
};

const FRAME_SIZES = {
  small: 'w-20 h-28',
  medium: 'w-24 h-36',
  large: 'w-32 h-48',
};


// SVG для prof frame с возможностью изменения цвета
const PROF_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 589.74 554.95" style="enable-background:new 0 0 589.74 554.95;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000149341803916845779380000017429945270160260235_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" x="1.81" width="586.13" height="554.95"/>
	</defs>
	<clipPath id="SVGID_00000036939985417650480190000014330207871500202637_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="clip-path:url(#SVGID_00000036939985417650480190000014330207871500202637_);fill:${color};" d="M525.58,539.49H494.9
		c23.86-10.2,42.83-26.18,56.93-47.95h0.5v-0.81c8.55-13.22,15.28-27.32,20.2-42.28v43.65L525.58,539.49z M17.21,492.1v-43.65
		c4.92,14.96,11.65,29.05,20.2,42.28v0.81h0.5c14.1,21.77,33.07,37.76,56.93,47.95H64.47L17.21,492.1z M64.47,15.46h30.37
		c-23.86,10.2-42.83,26.18-56.93,47.95h-0.5v0.81c-8.56,13.22-15.3,27.31-20.2,42.28V62.85L64.47,15.46z M552.33,77.07
		c1.87,3.31,3.87,6.24,5.55,10.1c6.58,14.22,11.46,29,14.65,44.33v291.32c-3.99,19.32-10.72,37.63-20.2,54.93V77.07z M17.21,132.07
		c4-19.3,10.73-37.59,20.2-54.87v400.69c-1.87-3.31-3.87-6.24-5.55-10.1c-6.58-14.22-11.46-28.99-14.65-44.33V132.07z
		 M473.21,539.49H116.29c-14.33-3.37-27.57-9.22-39.72-17.53c-12.15-8.31-22.4-18.53-30.74-30.67V63.91
		c8.41-12.15,18.7-22.4,30.89-30.75c12.18-8.35,25.46-14.25,39.82-17.7h356.91c14.34,3.36,27.59,9.2,39.74,17.51
		c12.15,8.32,22.39,18.54,30.72,30.69v427.37c-8.41,12.15-18.7,22.4-30.89,30.75C500.84,530.13,487.57,536.03,473.21,539.49z
		 M572.66,62.85v43.65c-4.91-14.97-11.64-29.06-20.2-42.28v-0.81h-0.5c-14.1-21.77-33.07-37.76-56.93-47.95h30.55L572.66,62.85z
		 M531.82,0H57.93L1.81,56.43v442.4l56.12,56.12h473.89l56.12-56.12V56.43L531.82,0z"/>
</g>
</svg>`;

// SVG для health frame с возможностью изменения цвета
const HEALTH_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1929.9 729.97" style="enable-background:new 0 0 1929.9 729.97;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000134930419654462736200000013282187408128278671_);fill:${color};}
	.st1{clip-path:url(#SVGID_00000130649406327513357400000010046765666610811562_);fill:${color};}
</style>
<g>
	<g>
		<defs>
			<rect id="SVGID_1_" y="0" width="1845.62" height="729.97"/>
		</defs>
		<clipPath id="SVGID_00000013185186776647391980000004790457235293935290_">
			<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
		</clipPath>
		<path style="clip-path:url(#SVGID_00000013185186776647391980000004790457235293935290_);fill:${color};" d="M2000.7,709.63h-39.4
			c29.44-12.16,54.05-33.16,73.82-63.01h0.66v-1.07c10.96-16.92,19.71-35.46,26.27-55.62v57.43L2000.7,709.63z M20.16,647.36v-57.43
			c6.55,20.17,15.31,38.71,26.27,55.62v1.07h0.66c19.73,29.82,44.29,50.82,73.68,63.01h-39.4L20.16,647.36z M81.37,20.35h39.4
			c-29.46,12.12-54.07,33.13-73.82,63H46.1v1.07c-10.94,16.9-19.7,35.42-26.27,55.54V82.53L81.37,20.35z M2062.24,82.61v57.43
			c-6.57-20.12-15.33-38.64-26.27-55.54v-1.07h-0.66c-19.75-29.88-44.36-50.88-73.82-63h39.4L2062.24,82.61z M2035.97,101.24
			c2.43,4.43,4.99,8.61,7.16,13.29c8.52,18.34,14.89,37.79,19.11,58.33V556.3c-5.37,25.99-14.13,50.05-26.27,72.19V101.24z
			 M20.16,173.59c5.36-25.96,14.11-50,26.27-72.11v527.18c-2.43-4.35-4.99-8.2-7.16-13.29c-8.49-18.31-14.82-37.73-18.98-58.25
			L20.16,173.59z M1933.13,709.63H148.55c-17.66-3.78-34.32-11.1-49.99-21.96C82.9,676.81,69.11,663.02,57.2,646.3V84.01
			c12.02-16.78,25.9-30.62,41.66-41.54c15.76-10.91,32.52-18.29,50.28-22.13h1784.38c17.66,3.79,34.31,11.12,49.98,21.98
			c15.66,10.85,29.45,24.64,41.37,41.36v562.21c-12.01,16.79-25.89,30.65-41.66,41.58c-15.76,10.93-32.53,18.32-50.29,22.17H1933.13
			z M2008.98,0H73.03L0.13,73.83v581.9l72.9,73.83h1935.95l72.96-73.83V73.83L2008.98,0z"/>
	</g>
	<g>
		<defs>
			<rect id="SVGID_00000177448983847275677360000000668792487046967995_" x="84.28" y="0" width="1845.62" height="729.97"/>
		</defs>
		<clipPath id="SVGID_00000050631885359968622010000012923711596706859193_">
			<use xlink:href="#SVGID_00000177448983847275677360000000668792487046967995_"  style="overflow:visible;"/>
		</clipPath>
		<path style="clip-path:url(#SVGID_00000050631885359968622010000012923711596706859193_);fill:${color};" d="M-132.14,647.36
			v-57.43c6.55,20.17,15.31,38.71,26.27,55.62v1.07h0.66c19.77,29.85,44.37,50.85,73.82,63.01h-39.4L-132.14,647.36z
			 M1848.54,709.63h-39.4c29.39-12.18,53.96-33.18,73.68-63.01h0.66v-1.07c10.96-16.92,19.71-35.46,26.27-55.62v57.43
			L1848.54,709.63z M1910.07,82.53v57.43c-6.57-20.12-15.33-38.64-26.27-55.54v-1.07h-0.85c-19.75-29.88-44.35-50.88-73.82-63h39.4
			L1910.07,82.53z M-71,20.43h39.4c-29.46,12.12-54.07,33.13-73.82,63h-0.66v1.07c-10.94,16.9-19.7,35.42-26.27,55.54V82.61
			L-71,20.43z M-106.06,628.49c-12.14-22.14-20.9-46.2-26.27-72.19V172.85c4.22-20.54,10.59-39.99,19.11-58.33
			c2.17-4.68,4.73-8.86,7.16-13.29L-106.06,628.49z M1909.61,557.12c-4.16,20.52-10.49,39.94-18.98,58.25
			c-2.17,5.09-4.73,8.94-7.16,13.29V101.48c12.16,22.11,20.91,46.15,26.27,72.11L1909.61,557.12z M-3.02,709.63
			c-17.76-3.85-34.52-11.24-50.29-22.17c-15.76-10.93-29.64-24.78-41.66-41.58V83.68c11.91-16.71,25.7-30.5,41.37-41.36
			c15.67-10.86,32.32-18.19,49.98-21.98h1784.38c17.76,3.84,34.52,11.21,50.28,22.13c15.76,10.92,29.64,24.76,41.66,41.54V646.3
			c-11.91,16.72-25.7,30.51-41.36,41.37c-15.67,10.86-32.33,18.18-49.99,21.96H-3.22H-3.02z M-152.03,73.83v581.9l72.96,73.83
			h1935.95l72.9-73.83V73.83L1856.88,0L-79.07,0L-152.03,73.83z"/>
		</g>
	</g>
</svg>`;

// SVG для initiative frame с возможностью изменения цвета
const INITIATIVE_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 594.96 381.81" style="enable-background:new 0 0 594.96 381.81;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000015334499232978757650000018419774887940458390_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" x="1.04" y="0" width="593.92" height="381.8"/>
	</defs>
	<clipPath id="SVGID_00000043445080029420368580000000819863455581485192_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="clip-path:url(#SVGID_00000043445080029420368580000000819863455581485192_);fill:${color};" d="M579.69,229.08
		l-84.85,134.06h-14.42l99.27-159.51V229.08z M101.16,363.14L16.31,229.08v-25.45l99.27,159.51H101.16z M16.31,152.72l84.85-134.06
		h15.27l-0.85,0.85L16.31,178.18V152.72z M126.61,18.67h343.63l0.85,0.85L577.99,190.9L470.24,363.14H125.76L18.01,190.9
		L126.61,18.67z M494.84,18.67l84.85,134.06v25.45L480.42,19.51l-0.85-0.85H494.84z M502.48,0H93.52L1.04,145.94v89.09l92.48,146.78
		h408.11l93.33-145.94v-89.94L502.48,0z"/>
</g>
</svg>`;

// SVG для AC frame с возможностью изменения цвета
const AC_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 594.96 684" style="enable-background:new 0 0 594.96 684;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000113349120589317612820000016326097962434088106_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" x="3.45" y="6" width="588.99" height="671"/>
	</defs>
	<clipPath id="SVGID_00000011027156252678266850000012467536546089802390_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="clip-path:url(#SVGID_00000011027156252678266850000012467536546089802390_);fill:${color};" d="M543.98,236.38v100.65
		c-7.46,26.84-71.57,227.39-234.85,284.8c-2.24-2.98-5.96-5.22-10.44-5.22c-4.47,0-7.46,2.24-10.44,5.22
		C124.98,563.67,61.61,363.12,53.41,336.28v-99.9c5.22-2.24,8.95-6.71,8.95-12.67c0-0.75,0-1.49-0.75-2.24
		c45.48-29.82,62.63-84.99,67.85-111.83l158.8-48.46c2.24,2.98,5.96,5.22,10.44,5.22c4.47,0,8.2-2.24,10.44-5.22l158.06,48.46
		c5.96,26.84,22.37,82.01,67.85,111.83c0,0.74,0,1.49,0,2.24C535.04,229.67,538.76,234.14,543.98,236.38z M476.88,104.41l-0.75-2.98
		L312.12,51.48c-0.75-6.71-5.96-12.67-13.42-12.67c-7.46,0-12.67,5.96-13.42,12.67l-164.02,49.95l-0.75,2.98
		c-4.47,23.86-20.13,79.03-64.12,108.11c-2.24-2.24-5.22-2.98-8.2-2.98c-7.46,0-13.42,5.96-13.42,14.17
		c0,5.96,3.73,11.18,8.95,12.67v100.65v1.49c6.71,23.86,72.32,232.61,241.56,292.26c0.75,7.46,5.96,13.42,13.42,13.42
		c7.46,0,13.42-5.96,13.42-13.42c69.34-24.6,128.98-75.3,177.44-152.09c39.51-62.63,58.9-123.02,64.12-140.16V236.38
		c5.22-2.24,8.95-6.71,8.95-12.67c0-7.46-5.96-14.17-13.42-14.17c-2.98,0-5.96,1.49-8.2,2.98
		C497.01,184.19,481.36,128.27,476.88,104.41z M575.3,341.5c-5.22,18.64-75.3,261.69-277.35,316.86
		C97.4,603.19,27.31,359.39,22.09,341.5V205.06c61.88-17.89,76.79-96.92,79.77-120.03L298.7,25.38l196.83,59.64
		c2.98,23.11,17.89,102.14,79.77,120.03V341.5z M585.73,188.66c-64.86-13.42-73.81-111.09-73.81-111.83l-0.75-5.96L297.95,6
		L84.72,70.86l-0.75,5.96c0,0.75-8.95,99.16-73.81,111.83l-7.46,1.49v152.09v2.24c0.75,2.98,72.32,273.62,292.26,331.77l2.24,0.75
		l2.24-0.75c222.18-58.15,293-328.79,293.75-331.77V190.15L585.73,188.66z M543.98,336.28c-7.46,26.84-71.57,227.39-234.85,284.8
		c-2.24-2.98-5.96-5.22-10.44-5.22c-4.47,0-7.46,2.24-10.44,5.22C124.98,563.67,61.61,363.12,53.41,336.28v-99.9
		c5.22-2.24,8.95-6.71,8.95-12.67c0-0.75,0-1.49-0.75-2.24c45.48-29.82,62.63-84.99,67.85-111.83l158.8-48.46
		c2.24,2.98,5.96,5.22,10.44,5.22c4.47,0,8.2-2.24,10.44-5.22l158.06,48.46c5.96,26.84,22.37,82.01,67.85,111.83
		c0,0.74,0,1.49,0,2.24c0,5.96,3.73,11.18,8.95,12.67V336.28z M549.2,209.54c-2.98,0-5.96,1.49-8.2,2.98
		c-43.24-29.08-58.9-84.25-64.12-108.11l-0.75-2.98L312.12,51.48c-0.75-6.71-5.96-12.67-13.42-12.67c-7.46,0-12.67,5.96-13.42,12.67
		l-164.02,49.95l-0.75,2.98c-4.47,23.86-20.13,79.03-64.12,108.11c-2.24-2.24-5.22-2.98-8.2-2.98c-7.46,0-13.42,5.96-13.42,14.17
		c0,5.96,3.73,11.18,8.95,12.67v100.65v1.49c6.71,23.86,72.32,232.61,241.56,292.26c0.75,7.46,5.96,13.42,13.42,13.42
		c7.46,0,13.42-5.96,13.42-13.42c69.34-24.6,128.98-75.3,177.44-152.09c39.51-62.63,58.9-123.02,64.12-140.16V236.38
		c5.22-2.24,8.95-6.71,8.95-12.67C562.62,215.5,556.66,209.54,549.2,209.54z M543.98,336.28c-7.46,26.84-71.57,227.39-234.85,284.8
		c-2.24-2.98-5.96-5.22-10.44-5.22c-4.47,0-7.46,2.24-10.44,5.22C124.98,563.67,61.61,363.12,53.41,336.28v-99.9
		c5.22-2.24,8.95-6.71,8.95-12.67c0-0.75,0-1.49-0.75-2.24c45.48-29.82,62.63-84.99,67.85-111.83l158.8-48.46
		c2.24,2.98,5.96,5.22,10.44,5.22c4.47,0,8.2-2.24,10.44-5.22l158.06,48.46c5.96,26.84,22.37,82.01,67.85,111.83
		c0,0.74,0,1.49,0,2.24c0,5.96,3.73,11.18,8.95,12.67V336.28z M549.2,209.54c-2.98,0-5.96,1.49-8.2,2.98
		c-43.24-29.08-58.9-84.25-64.12-108.11l-0.75-2.98L312.12,51.48c-0.75-6.71-5.96-12.67-13.42-12.67c-7.46,0-12.67,5.96-13.42,12.67
		l-164.02,49.95l-0.75,2.98c-4.47,23.86-20.13,79.03-64.12,108.11c-2.24-2.24-5.22-2.98-8.2-2.98c-7.46,0-13.42,5.96-13.42,14.17
		c0,5.96,3.73,11.18,8.95,12.67v100.65v1.49c6.71,23.86,72.32,232.61,241.56,292.26c0.75,7.46,5.96,13.42,13.42,13.42
		c7.46,0,13.42-5.96,13.42-13.42c69.34-24.6,128.98-75.3,177.44-152.09c39.51-62.63,58.9-123.02,64.12-140.16V236.38
		c5.22-2.24,8.95-6.71,8.95-12.67C562.62,215.5,556.66,209.54,549.2,209.54z"/>
	</g>
</svg>`;

// SVG для ST frame с возможностью изменения цвета
const ST_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 594.96 424.73" preserveAspectRatio="none" style="enable-background:new 0 0 594.96 424.73;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000031919091565253285310000017904838713174993555_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" y="1.27" width="594.96" height="423.46"/>
	</defs>
	<clipPath id="SVGID_00000053541308028704754930000015886338167208273544_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="clip-path:url(#SVGID_00000053541308028704754930000015886338167208273544_);fill:${color};" d="M585.11,319.92
		c-2.79-21.04-3.86-42.17-3.2-63.39c2.12,22.59,4.85,46.33,8.47,59.09c-1.86,1.29-3.61,2.7-5.27,4.23 M583.84,346.09l-1.08,11.92
		c-2.12-6.35-4.23-11.5-4.38-11.77c-1.07-4.77-0.47-9.31,1.8-13.64C581.16,337.17,582.38,341.66,583.84,346.09 M556.32,417.62h-18.8
		c35.23-14.25,41.65-41.03,42.18-56.49c0.8,2.6,1.57,5.34,2.12,7.94l-2.63,29.24C573.28,400.42,558.97,406.77,556.32,417.62
		 M15.82,398.31l-2.67-29.24c0.53-2.5,1.25-5.12,2.12-7.66c0.18,6.2,1.27,12.23,3.28,18.1c4.23,12.47,14.57,28.22,39,38.11H38.64
		c-2.65-10.86-16.94-17.15-22.87-19.31 M16.66,346.09c-0.19,0.42-2.39,5.63-4.49,12.09l-1.08-11.92c1.5-4.52,2.75-9.12,3.73-13.78
		c2.3,4.25,2.93,8.73,1.88,13.44 M4.55,315.75c3.62-12.7,6.35-36.5,8.47-59.09c0.66,21.21-0.39,42.33-3.18,63.37
		c-1.67-1.53-3.43-2.94-5.29-4.23 M9.82,106.08c2.79,21.04,3.86,42.17,3.2,63.39c-2.12-22.59-4.85-46.33-8.47-59.09
		c1.86-1.29,3.61-2.7,5.27-4.23 M11.12,79.93l1.08-11.94c2.12,6.35,4.23,11.5,4.38,11.77c1.09,4.76,0.5,9.31-1.76,13.64
		c-0.97-4.56-2.19-9.05-3.66-13.47 M38.64,8.38h18.8c-35.23,14.27-41.65,41.03-42.18,56.4c-0.8-2.6-1.57-5.34-2.12-7.94l2.63-29.16
		C21.68,25.58,35.99,19.23,38.64,8.38 M579.14,27.69l2.63,29.24c-0.53,2.52-1.25,5.15-2.12,7.66c-0.18-6.2-1.27-12.23-3.28-18.1
		c-4.23-12.45-14.57-28.22-39-38.11h18.82c2.65,10.86,16.94,17.15,22.87,19.31 M578.28,79.97c0.19-0.42,2.39-5.63,4.49-12.09
		l1.08,11.94c-1.5,4.5-2.73,9.06-3.71,13.7c-2.3-4.25-2.93-8.73-1.88-13.44 M590.39,110.31c-3.62,12.7-6.35,36.5-8.47,59.09
		c-0.66-21.21,0.39-42.33,3.18-63.37c1.67,1.53,3.44,2.94,5.29,4.23 M574.72,347.36c0,0,0.95,2.22,2.12,5.44
		c0.94,8.8,0,17.4-2.82,25.79c-6.25,18.21-21.51,31.53-44.21,38.94H64.96c-48.7-15.84-48.27-53.38-46.92-64.6
		c1.25-3.37,2.24-5.72,2.31-5.89c0.76-3.54,0.76-7.08-0.02-10.61c-0.78-3.54-2.25-6.75-4.43-9.65c7.16-39.13,3.51-88.93,3.35-91.21
		V190.6c0.19-2.48,3.83-52.38-3.32-91.53c2.16-2.95,3.62-6.21,4.37-9.79c0.75-3.58,0.73-7.15-0.06-10.72c0,0-0.95-2.24-2.12-5.44
		c-0.95-8.8-0.03-17.39,2.77-25.79c6.35-18.21,21.51-31.55,44.23-38.94H530c48.8,15.84,48.27,53.38,46.92,64.6
		c-1.25,3.37-2.24,5.72-2.31,5.89c-0.76,3.54-0.76,7.08,0.02,10.61c0.77,3.54,2.25,6.75,4.43,9.65
		c-7.16,39.13-3.51,88.93-3.35,91.21v45.06c-0.19,2.48-3.83,52.38,3.32,91.53c-2.17,2.95-3.63,6.21-4.38,9.79
		c-0.76,3.58-0.74,7.15,0.04,10.73 M582.85,215.96v4.23c1.63-26.53,5.59-90.34,11.69-110.1l0.44-1.44l-1.27-0.78
		c-2.85-1.87-5.45-4.05-7.79-6.52c1.12-6.75,2.78-13.37,4.95-19.86l0.25-0.72l-5.27-58.33l-2.29-0.72
		c-5.34-1.65-20.56-8.28-20.56-16.94V1.27H31.95v3.56c0,8.58-14.82,15.08-20.56,16.94L9.1,22.44L3.85,80.8l0.25,0.72
		c2.17,6.48,3.82,13.08,4.95,19.82c-2.35,2.49-4.94,4.67-7.79,6.56L0,108.7l0.44,1.42c6.1,19.75,10.04,83.44,11.67,110.1v-4.23
		c-1.52,26.38-5.57,80.12-11.67,99.89L0,317.32l1.27,0.78c2.85,1.87,5.45,4.05,7.79,6.52C7.95,331.38,6.3,338,4.11,344.48
		l-0.25,0.72l5.25,58.35l2.29,0.72c5.72,1.78,20.56,8.28,20.56,16.94v3.51h531.06v-3.56c0-8.47,14.82-15.08,20.56-16.94l2.29-0.72
		l5.25-58.4l-0.25-0.72c-2.17-6.48-3.82-13.08-4.95-19.82c2.35-2.49,4.94-4.67,7.79-6.56l1.27-0.8l-0.44-1.42
		c-6.1-19.75-10.04-73.36-11.67-99.92"/>
</g>
</svg>`;

// SVG для ST-MODE frame с возможностью изменения цвета
const ST_MODE_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 594.96 189.05" preserveAspectRatio="none" style="enable-background:new 0 0 594.96 189.05;" xml:space="preserve">
<style type="text/css">
	.st0{opacity:0.502;clip-path:url(#SVGID_00000114792661753458679230000002293415248087159739_);fill:${color};}
	.st1{clip-path:url(#SVGID_00000016791113561085203680000007055825027247842966_);fill:none;stroke:${color};stroke-width:6;}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" width="594.96" height="189.05"/>
	</defs>
	<clipPath id="SVGID_00000160182874584437609720000013923479417205329570_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="opacity:0.502;clip-path:url(#SVGID_00000160182874584437609720000013923479417205329570_);fill:${color};" d="
		M424.82,33.54c4.61-5.12,9.74-9.74,15.37-13.32h27.16C450.96,26.88,436.61,30.98,424.82,33.54z M409.96,30.98
		c-1.54,2.05-2.56,3.59-4.1,5.64c-19.99,2.05-32.28-2.05-39.46-5.64H409.96z M7.17,58.65c10.76-6.66,21.52-22.04,25.11-27.67h28.18
		c-16.91,7.17-41,19.99-53.3,37.41V58.65z M32.28,158.07c-3.59-5.64-14.35-21.01-25.11-27.67v-9.74
		c11.79,17.42,36.38,30.24,53.3,37.41H32.28z M405.86,152.43c1.54,2.05,2.56,3.59,4.1,5.64H366.4
		C373.58,154.48,385.88,150.38,405.86,152.43z M440.2,168.83c-5.64-4.1-10.76-8.71-15.37-13.32c12.3,2.56,26.14,6.66,42.53,13.32
		H440.2z M392.54,42.25c3.07,0,6.66,0,10.25,0c-9.22,15.89-14.35,33.82-14.35,52.78s5.12,36.9,14.86,52.78
		c-3.59,0-6.66-0.51-10.25,0c-3.07-5.12-15.89-26.65-15.89-52.27S389.47,47.38,392.54,42.25z M357.69,30.98
		c4.1,3.59,12.81,9.22,29.21,10.76c-4.61,7.69-15.37,28.19-15.37,52.78c0,24.6,10.25,45.1,15.37,52.78
		c-16.4,1.54-25.11,7.17-29.21,10.76H73.79c-15.89-5.64-56.88-23.06-66.11-47.66V78.64c9.74-24.6,50.73-41.51,66.11-47.66H357.69z
		 M584.71,94.52c0,29.72-14.86,57.39-38.95,74.31h-52.78c-24.09-10.76-56.88-16.4-73.28-19.47c-11.79-15.37-18.96-34.85-18.96-54.83
		c0-19.99,6.66-39.46,18.96-54.83c15.89-3.07,48.68-8.71,73.28-19.47h52.78C570.36,37.13,584.71,64.8,584.71,94.52z M547.3,7.41
		H434.56l-1.54,1.03c-6.15,4.1-11.79,8.71-16.4,13.84H29.21l-1.54,2.05C24.09,30.47,12.3,47.38,2.56,51.99L0,53.02v82.5l2.56,1.03
		c9.22,4.61,21.01,21.52,25.11,27.67l1.54,2.05h387.42c5.12,5.12,10.76,9.74,16.4,13.84l1.54,1.03h112.23l1.54-1.03
		c28.7-19.47,46.12-51.25,46.12-86.09c0-34.85-17.42-66.62-46.12-86.09L547.3,7.41z"/>
</g>
<g>
	<defs>
		<rect id="SVGID_00000040563197140534082810000010552020147713184408_" x="385" width="204.4" height="200.17"/>
	</defs>
	<clipPath id="SVGID_00000147191182281193406740000015579925479883515322_">
		<use xlink:href="#SVGID_00000040563197140534082810000010552020147713184408_"  style="overflow:visible;"/>
	</clipPath>
	
		<path style="clip-path:url(#SVGID_00000147191182281193406740000015579925479883515322_);fill:none;stroke:${color};stroke-width:6;" d="
		M439.2,17.09h97.06c2.9,0,5.5,0.77,7.47,2.24c15.83,11.83,40.68,40.22,40.68,80.76s-24.85,68.93-40.68,80.76
		c-1.96,1.47-4.57,2.24-7.47,2.24H439.2c-3.4,0-6.46-1.06-8.65-3.05c-15.24-13.77-38.07-43.44-38.07-79.95s22.84-66.18,38.07-79.95
		C432.74,18.15,435.8,17.09,439.2,17.09z"/>
</g>
</svg>`;

// SVG для Senses frame с возможностью изменения цвета
const SENSES_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 135.21 19.07" preserveAspectRatio="none" style="enable-background:new 0 0 135.21 19.07;" xml:space="preserve">
<style type="text/css">
	.st0{opacity:0.502;clip-path:url(#SVGID_00000053511150965319378430000015135088416954818483_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" width="135.15" height="19.07"/>
	</defs>
	<clipPath id="SVGID_00000143595667250754180040000005075864377232459432_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="opacity:0.502;clip-path:url(#SVGID_00000143595667250754180040000005075864377232459432_);fill:${color};" d="
		M18.95,2.86c-1.35-0.28-2.86-0.73-4.65-1.46h2.97C17.89,1.85,18.45,2.36,18.95,2.86z M25.29,2.58c-0.79,0.39-2.07,0.79-4.32,0.62
		c-0.17-0.22-0.28-0.39-0.45-0.62H25.29z M134.14,5.61v1.07c-1.29-1.91-3.98-3.31-5.83-4.09h3.08
		C131.84,3.2,132.96,4.88,134.14,5.61z M131.45,16.49h-3.08c1.85-0.79,4.54-2.19,5.83-4.09v1.07
		C132.96,14.19,131.84,15.87,131.45,16.49z M21.03,15.87c2.19-0.22,3.53,0.22,4.32,0.62h-4.77C20.69,16.26,20.86,16.09,21.03,15.87z
		 M17.27,17.66H14.3c1.79-0.73,3.36-1.18,4.65-1.46C18.45,16.71,17.89,17.22,17.27,17.66z M22.49,3.81
		c0.34,0.56,1.74,2.92,1.74,5.72c0,2.8-1.4,5.16-1.74,5.72c-0.34,0-0.73,0-1.12,0c1.01-1.74,1.63-3.7,1.63-5.78
		c0-2.07-0.56-4.04-1.57-5.78C21.76,3.81,22.15,3.81,22.49,3.81z M126.91,2.58c1.74,0.62,6.22,2.52,7.23,5.22v3.48
		c-1.07,2.69-5.55,4.6-7.23,5.22H26.3c-0.45-0.39-1.4-1.01-3.2-1.18c0.5-0.84,1.68-3.08,1.68-5.78c0-2.69-1.12-4.93-1.68-5.78
		c1.79-0.17,2.75-0.79,3.2-1.18H126.91z M1.4,9.53c0-3.25,1.63-6.28,4.26-8.13h5.78c2.64,1.18,6.22,1.79,8.02,2.13
		c1.29,1.68,2.07,3.81,2.07,6c0,2.19-0.73,4.32-2.07,6c-1.74,0.34-5.33,0.95-8.02,2.13H5.66C3.03,15.81,1.4,12.79,1.4,9.53z
		 M5.1,0.11C1.91,2.24,0,5.72,0,9.53c0,3.81,1.91,7.29,5.1,9.42l0.17,0.11h12.39l0.17-0.11c0.67-0.45,1.29-0.95,1.85-1.51h112.27
		l0.17-0.22c0.39-0.67,1.68-2.52,2.75-3.03l0.28-0.11V5.05l-0.28-0.11c-1.07-0.5-2.36-2.36-2.75-3.03l-0.17-0.22H19.68
		c-0.56-0.56-1.18-1.07-1.85-1.51l-0.17-0.11H5.27L5.1,0.11z"/>
</g>
</svg>`;

// SVG для левой части ST-MODE frame (растягивается)
const ST_MODE_FRAME_LEFT_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 189.05" preserveAspectRatio="none" style="enable-background:new 0 0 400 189.05;" xml:space="preserve">
<style type="text/css">
	.st0{opacity:0.502;fill:${color};}
</style>
<g>
	<path style="opacity:0.502;fill:${color};" d="
		M424.82,33.54c4.61-5.12,9.74-9.74,15.37-13.32h27.16C450.96,26.88,436.61,30.98,424.82,33.54z M409.96,30.98
		c-1.54,2.05-2.56,3.59-4.1,5.64c-19.99,2.05-32.28-2.05-39.46-5.64H409.96z M7.17,58.65c10.76-6.66,21.52-22.04,25.11-27.67h28.18
		c-16.91,7.17-41,19.99-53.3,37.41V58.65z M32.28,158.07c-3.59-5.64-14.35-21.01-25.11-27.67v-9.74
		c11.79,17.42,36.38,30.24,53.3,37.41H32.28z M405.86,152.43c1.54,2.05,2.56,3.59,4.1,5.64H366.4
		C373.58,154.48,385.88,150.38,405.86,152.43z M440.2,168.83c-5.64-4.1-10.76-8.71-15.37-13.32c12.3,2.56,26.14,6.66,42.53,13.32
		H440.2z M392.54,42.25c3.07,0,6.66,0,10.25,0c-9.22,15.89-14.35,33.82-14.35,52.78s5.12,36.9,14.86,52.78
		c-3.59,0-6.66-0.51-10.25,0c-3.07-5.12-15.89-26.65-15.89-52.27S389.47,47.38,392.54,42.25z M357.69,30.98
		c4.1,3.59,12.81,9.22,29.21,10.76c-4.61,7.69-15.37,28.19-15.37,52.78c0,24.6,10.25,45.1,15.37,52.78
		c-16.4,1.54-25.11,7.17-29.21,10.76H73.79c-15.89-5.64-56.88-23.06-66.11-47.66V78.64c9.74-24.6,50.73-41.51,66.11-47.66H357.69z
		 M584.71,94.52c0,29.72-14.86,57.39-38.95,74.31h-52.78c-24.09-10.76-56.88-16.4-73.28-19.47c-11.79-15.37-18.96-34.85-18.96-54.83
		c0-19.99,6.66-39.46,18.96-54.83c15.89-3.07,48.68-8.71,73.28-19.47h52.78C570.36,37.13,584.71,64.8,584.71,94.52z M547.3,7.41
		H434.56l-1.54,1.03c-6.15,4.1-11.79,8.71-16.4,13.84H29.21l-1.54,2.05C24.09,30.47,12.3,47.38,2.56,51.99L0,53.02v82.5l2.56,1.03
		c9.22,4.61,21.01,21.52,25.11,27.67l1.54,2.05h387.42c5.12,5.12,10.76,9.74,16.4,13.84l1.54,1.03h112.23l1.54-1.03
		c28.7-19.47,46.12-51.25,46.12-86.09c0-34.85-17.42-66.62-46.12-86.09L547.3,7.41z"/>
</g>
</svg>`;

// SVG для правой части ST-MODE frame (круг, не растягивается)
const ST_MODE_FRAME_RIGHT_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 200 189.05" preserveAspectRatio="xMidYMid meet" style="enable-background:new 0 0 200 189.05;" xml:space="preserve">
<style type="text/css">
	.st1{fill:none;stroke:${color};stroke-width:6;}
</style>
<g>
	<path style="fill:none;stroke:${color};stroke-width:6;" d="
		M39.2,17.09h97.06c2.9,0,5.5,0.77,7.47,2.24c15.83,11.83,40.68,40.22,40.68,80.76s-24.85,68.93-40.68,80.76
		c-1.96,1.47-4.57,2.24-7.47,2.24H39.2c-3.4,0-6.46-1.06-8.65-3.05c-15.24-13.77-38.07-43.44-38.07-79.95s22.84-66.18,38.07-79.95
		C32.74,18.15,35.8,17.09,39.2,17.09z"/>
</g>
</svg>`;

// SVG для ability frame с возможностью изменения цвета
const ABILITY_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 589.74 685.56" style="enable-background:new 0 0 589.74 685.56;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000145755895830112029350000015347681870905934515_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" x="2.74" width="584.53" height="685.56"/>
	</defs>
	<clipPath id="SVGID_00000119832078549856513310000014277953188518970040_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="clip-path:url(#SVGID_00000119832078549856513310000014277953188518970040_);fill:${color};" d="M32.92,354.39
		c0.76-44.63-1.33-89.13-6.28-133.49c-2.95,2.57-6.03,4.97-9.24,7.22C24.11,251.85,29.02,313.55,32.92,354.39z M32.92,604.92h51.74
		c-15.31-10.04-31.98-16.68-50.01-19.92C34,593.3,33.35,600.16,32.92,604.92z M35.44,574.83c4.39,0.51,8.72,1.36,12.99,2.53
		c-3.97-3.97-8.15-8.37-12.27-13.2C36.16,567.9,35.66,571.37,35.44,574.83z M146.78,651.9c-12.44-0.4-24.66,1.04-36.66,4.33
		c20.06,8.23,45.1,15.73,52.75,11.47h0.51c-3.03-3.03-8.8-8.51-16.6-15.44V651.9z M294.71,664.89c50.51,0,93.81-18.4,118.92-45.82
		c1.95-2.16,3.82-4.47,5.63-6.78c0.14-0.26,0.31-0.5,0.5-0.72c1.6-2.12,3.07-4.34,4.4-6.64c6.93-11.18,10.44-23.36,10.54-36.51
		c0-53.18-62.78-96.48-139.99-96.48s-139.99,43.3-139.99,96.48c0.11,13.14,3.59,25.31,10.46,36.51c1.37,2.31,2.89,4.47,4.47,6.64
		l0.58,0.72c1.73,2.31,3.61,4.62,5.56,6.78C200.54,646.49,244.49,664.89,294.71,664.89z M425.97,667.34h0.51
		c7.65,4.26,32.76-3.25,52.75-11.47c-12-3.29-24.22-4.73-36.66-4.33c-7.72,7.22-13.57,12.41-16.6,15.44V667.34z M504.91,604.85
		h51.74c-0.43-4.76-1.08-11.62-1.73-19.92C536.88,588.15,520.21,594.79,504.91,604.85z M540.99,577.29
		c4.26-1.18,8.59-2.02,12.99-2.53c0-3.32-0.51-7.22-0.72-10.68C549.14,568.91,544.96,573.32,540.99,577.29z M556.5,354.39
		c3.82-40.84,9.02-102.54,15.51-125.99c-3.2-2.24-6.28-4.65-9.24-7.22c-4.95,44.36-7.04,88.86-6.28,133.49V354.39z M19.21,573.39
		h2.02c0.58-8.08,1.15-17.17,1.73-27.13c-8.82-12.8-14.14-26.92-15.95-42.36c-0.75-9.63,0.5-18.98,3.74-28.07
		c3.25-9.09,8.2-17.12,14.88-24.1v-8.44c0,0-9.96-185.88-19.12-215.54l-1.15-4.04l3.39-2.09c5.82-3.87,11.11-8.37,15.87-13.49
		c4.94-4.55,8.67-9.94,11.18-16.16c3.72-7.69,4.63-15.7,2.74-24.03c0-0.79-4.19-9.74-8.08-21.65l-1.88,20.57
		c1.95,5.7,3.61,11.76,5.12,17.97c-2.53,5.76-6.28,10.57-11.26,14.43c-1.88-9.8-4.35-19.45-7.43-28.94l-0.51-1.44l8.95-99.36
		c0,14.43,9.96,47.12,9.96,47.12c3.49,16.53,8.54,32.58,15.15,48.13c1.56,7.47,1.46,14.91-0.3,22.33c-1.75,7.42-5,14.11-9.73,20.1
		c12.12,67.04,0.58,305.16-0.94,333.23c-5.56-7.79-10.07-16.16-13.49-25.11c0.58-14.43,0.94-30.02,1.15-46.25
		c-6.6,10.39-9.36,21.72-8.3,33.99c1.81,14.27,6.86,27.28,15.15,39.04l1.08,1.59l3.25,4.62l0.43,0.5
		c11.94,15.51,25.75,29.12,41.42,40.84c8.66,4.66,17.05,9.76,25.18,15.3l1.88,1.3c5.7,3.9,11.18,7.86,16.52,11.91l1.3,0.94
		c10.25,7.87,19.56,15.66,27.28,22.44c10.03,0,19.84,0.79,28.86,1.59c-8.81-6.92-16.48-14.93-23.02-24.03H131.7l-17.97-14.43h16.74
		c-3.44-9.73-5.56-19.73-6.35-30.02c-1.88,3.1-4.24,5.79-7.07,8.07c-2.83,2.27-5.96,4-9.39,5.18c-3.43,1.18-6.96,1.74-10.59,1.68
		c-3.63-0.06-7.14-0.73-10.54-2.01c4.26,1.3,21.65,3.82,37.81-29.44c1.17-15.12,7.23-27.91,18.18-38.39
		c-6.07,11.41-9.73,23.55-10.98,36.41c-1.25,12.86,0.01,25.47,3.76,37.84c2.53,3.31,5.87,4.96,10.03,4.98
		c-3.89-9.81-5.81-19.98-5.77-30.52c0-61.7,69.71-111.92,155.43-111.92c85.72,0,154.85,50.22,154.85,111.92
		c0.04,10.54-1.88,20.72-5.77,30.52c3.94-0.04,7.17-1.58,9.67-4.62c3.75-12.37,5.01-24.98,3.76-37.84
		c-1.25-12.87-4.91-25-10.98-36.41c11.08,10.46,17.25,23.27,18.47,38.46c15.87,33.27,33.48,30.74,37.81,29.44
		c-3.39,1.28-6.91,1.96-10.54,2.01c-3.63,0.06-7.17-0.51-10.59-1.68c-3.43-1.18-6.57-2.91-9.4-5.18c-2.83-2.28-5.19-4.96-7.07-8.07
		c-0.79,10.29-2.91,20.29-6.35,30.02h16.74l-17.97,14.43h-24.53c-6.54,9.1-14.21,17.11-23.02,24.03c8.66-0.79,18.54-1.52,28.86-1.59
		c7.72-6.78,17.03-14.43,27.28-22.44l1.3-0.94c5.34-4.04,10.82-8.01,16.52-11.91l1.88-1.3c8.13-5.51,16.52-10.59,25.18-15.23
		c15.67-11.72,29.48-25.34,41.42-40.84l0.43-0.51l3.25-4.62l1.08-1.59c8.4-11.9,13.48-25.08,15.23-39.54
		c0.92-12.3-1.97-23.62-8.66-33.99c0,16.24,0.58,31.82,1.15,46.25c-3.34,8.93-7.74,17.3-13.21,25.11
		c-1.52-28.07-13.06-266.19-0.94-333.23c-4.68-6-7.87-12.71-9.56-20.14c-1.7-7.42-1.73-14.85-0.11-22.29
		c6.5-15.58,11.52-31.63,15.08-48.13c0,0,10.1-32.33,9.96-47.12l8.66,99.36l-0.51,1.44c-3.2,9.65-5.77,19.46-7.72,29.44
		c-4.94-3.9-8.72-8.7-11.33-14.43c1.59-6.21,3.25-12.27,5.12-17.97l-1.8-20.57c-3.9,11.62-7.72,20.57-8.08,21.65
		c-1.85,8.44-0.84,16.52,3.03,24.25c2.52,6.22,6.25,11.61,11.18,16.16c4.76,5.12,10.05,9.62,15.87,13.49l3.46,2.09l-1.23,3.82
		c-9.09,29.66-19.05,215.54-19.05,215.54c0,2.81,0,5.7,0,8.44c6.67,6.98,11.63,15.01,14.88,24.1c3.24,9.09,4.49,18.44,3.74,28.07
		c-1.86,15.45-7.16,29.61-15.88,42.5c0.51,9.96,1.08,19.05,1.66,27.13h2.02c10.75-0.87,20.13,5.12,15.59,12.63
		c-2.86,4.68-6.99,7.45-12.41,8.3c2.27-1.64,4.07-3.68,5.41-6.13c1.23-2.16,0-3.18-1.01-3.68h-2.74c-2.02-0.11-4.04-0.11-6.06,0
		c1.3,16.67,2.31,26.77,2.38,27.35l1.08,6.57h-89.19c-10.54,7.22-20.49,15.51-28.86,22.73c18.49-0.36,35.33,4.73,50.51,15.3
		l-19.84,7.87c-12.48,5.4-25.34,9.58-38.6,12.56h-2.38l-1.52,0.79c-69.71,12.05-76.99,5.41-76.99,5.41
		c18.88-0.27,35.19-6.88,48.92-19.84l1.66-1.73c0.72-0.72,4.47-4.47,10.53-10.1c-4.47,0-8.8,0.51-13.06,0.87h-3.18
		c-2.88,0.36-5.72,0.91-8.51,1.66c-2.14,0.51-4.23,1.16-6.28,1.95h-1.01c-2.5,0.84-4.91,1.9-7.22,3.17l-0.79,0.51
		c-1.96,1.14-3.81,2.44-5.56,3.9l-1.59,1.37c-2.05,1.85-3.85,3.93-5.41,6.21l-56.93,6.49h0.43c-15.54,1.93-31.08,1.93-46.61,0h0.43
		l-56.93-6.49c-1.56-2.3-3.39-4.37-5.48-6.21l-1.59-1.44c-1.81-1.45-3.71-2.78-5.7-3.97l-0.65-0.43c-2.22-1.19-4.51-2.25-6.86-3.17
		l-0.94,0.22c-2.16-0.79-4.26-1.44-6.21-1.95c-3.32-0.79-6.21-1.23-8.23-1.52h-3.17c-4.26,0-8.59-0.65-13.06-0.87
		c6.06,5.63,9.81,9.38,10.46,10.1l1.73,1.73c13.78,12.84,30.08,19.37,48.92,19.56c0,0-7.22,6.64-76.99-5.41h-1.73h-2.38
		c-13.26-2.97-26.14-7.15-38.6-12.56l-19.84-7.87c15.18-10.56,32.02-15.66,50.51-15.3c-8.66-7.22-18.62-15.15-28.86-22.73H16.9
		l0.87-7.79c0-0.58,1.08-10.68,2.38-27.35c-2.02-0.11-4.04-0.11-6.06,0h-2.74c-1.23,0.51-2.24,1.52-1.01,3.68
		c1.31,2.45,3.09,4.5,5.34,6.13c-5.31-1.01-9.32-3.85-12.05-8.51C-0.93,578.8,8.45,572.52,19.21,573.39z M35.08,98.3
		c-5.39-17.33-8.85-35.03-10.39-53.11v-3.03l4.55-1.44c10.9-3.32,41.13-16.52,41.13-33.48V0.02h448.68v7.22
		c0,17.1,30.23,30.31,40.84,33.63l4.55,1.44v3.03c-1.57,18.08-5.04,35.78-10.39,53.11l-3.17-45.75c-11.4-4.26-39.9-16.6-45.17-38.24
		H83.72c-5.34,21.65-33.77,33.99-45.17,38.24L35.08,98.3z"/>
	</g>
</svg>`;

// SVG для skills frame с возможностью изменения цвета
const SKILLS_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 315.22 840.96" preserveAspectRatio="none" style="enable-background:new 0 0 315.22 840.96;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000183207549375552638560000006266208224554728855_);fill:${color};}
</style>
<g>
	<path style="clip-path:url(#SVGID_00000070096713570082946120000011473604339421882247_);fill:${color};" d="M307.33,785.51
		c-1.45-11.14-2-22.32-1.66-33.54c1.1,11.96,2.52,24.5,4.4,31.26C309.09,783.93,308.18,784.69,307.33,785.51 M306.67,799.35
		l-0.56,6.31c-1.1-3.39-2.2-6.08-2.28-6.22c-0.56-2.52-0.25-4.92,0.93-7.21C305.27,794.64,305.9,797.01,306.67,799.35 M292.37,837.2
		h-9.76c18.29-7.54,21.62-21.71,21.9-29.89c0.42,1.39,0.81,2.81,1.1,4.2l-1.36,15.47C301.18,828.08,293.75,831.44,292.37,837.2
		 M11.75,826.98l-1.39-15.47c0.27-1.33,0.65-2.72,1.1-4.06c0.09,3.28,0.66,6.47,1.7,9.59c2.2,6.6,7.56,14.92,20.25,20.16H23.6
		c-1.37-5.76-8.79-9.08-11.87-10.22 M12.19,799.26c-0.1,0.23-1.24,2.99-2.33,6.4l-0.56-6.31c0.78-2.36,1.42-4.76,1.93-7.2
		c1.19,2.25,1.52,4.62,0.98,7.11 M5.9,783.24c1.88-6.76,3.3-19.31,4.4-31.26c0.35,11.22-0.2,22.4-1.65,33.53
		C7.78,784.68,6.87,783.93,5.9,783.24 M8.67,55.45c1.44,11.15,1.98,22.35,1.63,33.59c-1.1-11.95-2.52-24.5-4.4-31.26
		c0.97-0.69,1.88-1.45,2.74-2.28 M9.31,41.61l0.56-6.31c1.1,3.37,2.2,6.08,2.28,6.22c0.56,2.51,0.26,4.92-0.91,7.21
		c-0.51-2.41-1.14-4.78-1.9-7.12 M23.6,3.76h9.76c-18.29,7.55-21.62,21.71-21.9,29.89c-0.42-1.37-0.81-2.81-1.1-4.2l1.36-15.47
		C14.79,12.88,22.22,9.52,23.6,3.76 M304.23,13.98l1.36,15.47c-0.27,1.33-0.65,2.73-1.1,4.06c-0.09-3.28-0.66-6.47-1.7-9.59
		c-2.2-6.6-7.56-14.92-20.25-20.16h9.77c1.37,5.76,8.79,9.08,11.87,10.22 M303.77,41.64c0.1-0.23,1.24-2.99,2.33-6.4l0.56,6.31
		c-0.78,2.38-1.42,4.8-1.92,7.26c-1.19-2.25-1.52-4.62-0.98-7.11 M310.06,57.67c-1.88,6.76-3.3,19.31-4.4,31.27
		c-0.35-11.22,0.2-22.4,1.65-33.54C308.18,56.22,309.09,56.98,310.06,57.67 M301.93,800.08c0,0,0.49,1.18,1.1,2.87
		c0.49,4.66,0,9.21-1.46,13.65c-3.22,9.63-11.11,16.67-22.93,20.6H37.26c-25.28-8.39-25.06-28.25-24.36-34.18
		c0.65-1.79,1.17-3.02,1.2-3.11c0.4-1.87,0.39-3.74-0.01-5.61c-0.4-1.87-1.17-3.58-2.3-5.12c3.72-20.7,1.82-47.06,1.74-48.25V100.17
		c0.1-1.31,1.99-27.71-1.73-48.42c1.13-1.57,1.89-3.3,2.28-5.19c0.39-1.89,0.38-3.78-0.03-5.67c0,0-0.49-1.18-1.1-2.87
		c-0.5-4.65-0.02-9.2,1.43-13.65c3.24-9.63,11.14-16.67,22.96-20.6h241.36c25.34,8.39,25.06,28.25,24.36,34.18
		c-0.65,1.79-1.17,3.02-1.2,3.12c-0.4,1.87-0.39,3.74,0.01,5.61c0.4,1.87,1.17,3.57,2.3,5.11c-3.72,20.7-1.82,47.06-1.74,48.25
		v640.77c-0.1,1.31-1.99,27.71,1.73,48.37c-1.13,1.57-1.89,3.3-2.28,5.19c-0.39,1.89-0.38,3.78,0.03,5.67 M306.15,719.51V110.5
		c0.85-14.03,2.9-42.45,6.07-52.92l0.23-0.76l-0.66-0.42c-1.48-1-2.83-2.15-4.05-3.45c0.58-3.57,1.44-7.07,2.57-10.51l0.13-0.37
		l-2.74-30.89l-1.19-0.37c-2.77-0.88-10.67-4.4-10.67-8.93V0H20.12v1.88c0,4.54-7.7,7.98-10.67,8.93l-1.19,0.37l-2.73,30.9
		l0.13,0.37c1.13,3.43,1.98,6.93,2.57,10.49c-1.21,1.31-2.56,2.47-4.05,3.47l-0.66,0.42l0.23,0.76c3.17,10.44,5.27,38.82,6.06,52.87
		v609.01c-0.79,14.02-2.89,53.45-6.06,63.9l-0.23,0.76l0.66,0.42c1.48,0.99,2.83,2.14,4.05,3.45c-0.58,3.57-1.43,7.08-2.57,10.51
		l-0.13,0.38l2.73,30.89l1.19,0.37c2.97,0.95,10.67,4.4,10.67,8.93v1.88h275.73v-1.88c0-4.54,7.7-7.98,10.67-8.93l1.19-0.37
		l2.73-30.89l-0.13-0.38c-1.13-3.43-1.98-6.93-2.57-10.49c1.21-1.31,2.56-2.47,4.05-3.47l0.66-0.42-0.23-0.76
		C309.04,772.92,307,733.56,306.15,719.51"/>
</g>
</svg>`;

// SVG для action frame с возможностью изменения цвета
const ACTION_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 289.93 307.31" preserveAspectRatio="none" style="enable-background:new 0 0 289.93 307.31;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000074437919751204614870000007753514779035950496_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" width="289.93" height="307.31"/>
	</defs>
	<clipPath id="SVGID_00000034811484770670226070000009542851693816943004_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="clip-path:url(#SVGID_00000034811484770670226070000009542851693816943004_);fill:${color};" d="M288.49,10.1
		c-0.45-1.41-1.05-2.74-1.81-4V6.01h-0.05c-1.25-2.06-2.97-3.58-5.17-4.56h2.75l4.28,4.47V10.1z M288.49,294.79
		c-0.36,1.83-0.96,3.56-1.81,5.22V7.31c0.2,0.31,0.37,0.64,0.51,0.98c0.58,1.36,1.03,2.75,1.35,4.19L288.49,294.79z M288.49,301.35
		l-4.28,4.47h-2.75c2.2-0.98,3.92-2.5,5.17-4.56h0.05v-0.09c0.78-1.26,1.38-2.59,1.81-4V301.35z M10.38,305.82
		c-1.32-0.32-2.53-0.87-3.63-1.66c-1.1-0.79-2.02-1.76-2.75-2.9V6.05c0.75-1.14,1.68-2.1,2.79-2.9c1.11-0.79,2.32-1.36,3.64-1.71
		H279.5c1.32,0.32,2.53,0.87,3.63,1.66c1.1,0.79,2.02,1.76,2.75,2.9v295.21c-0.75,1.14-1.68,2.1-2.79,2.9
		c-1.11,0.79-2.32,1.36-3.64,1.71H10.38z M10.38,305.82c-1.32-0.32-2.53-0.87-3.63-1.66c-1.1-0.79-2.02-1.76-2.75-2.9V6.05
		c0.75-1.14,1.68-2.1,2.79-2.9c1.11-0.79,2.32-1.36,3.64-1.71H279.5c1.32,0.32,2.53,0.87,3.63,1.66c1.1,0.79,2.02,1.76,2.75,2.9
		v295.21c-0.75,1.14-1.68,2.1-2.79,2.9c-1.11,0.79-2.32,1.36-3.64,1.71H10.38z"/>
</g>
</svg>`;

const CONDITION_FRAME_SVG = (color: string) => `<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 191.79 44.86" style="enable-background:new 0 0 191.79 44.86;" xml:space="preserve">
<style type="text/css">
	.st0{clip-path:url(#SVGID_00000171696861770939944030000010469763359886749355_);fill:${color};}
</style>
<g>
	<defs>
		<rect id="SVGID_1_" width="191.79" height="44.86"/>
	</defs>
	<clipPath id="SVGID_00000169529749726618591060000004765894090106221752_">
		<use xlink:href="#SVGID_1_"  style="overflow:visible;"/>
	</clipPath>
	<path style="clip-path:url(#SVGID_00000169529749726618591060000004765894090106221752_);fill:${color};" d="M189.93,38.91h-1V5.95
	h1V38.91z M2.96,38.68h-1V5.72h1V38.68z M191.78,3.02V2.11h-2.89V0h-1.26c0,0-0.5,0.73-1.84,0.73H5.99C4.65,0.73,4.15,0,4.15,0
	H2.89v2.11H0.01v0.91c1.19,0,1.26,1.96,1.26,1.96v33.71c0,0-0.07,1.93-1.26,1.93v0.94h2.89v3.31h1.26V1.56h183.48V43.3H4.15v1.56
	c0,0,0.5-0.73,1.84-0.73H185.8c1.33,0,1.83,0.72,1.84,0.73h1.26v-3.31h2.89v-0.94c-1.19,0-1.26-1.95-1.26-1.95V4.97
	C190.53,4.97,190.59,3.02,191.78,3.02z"/>
</g>
</svg>`;

export default function DynamicFrame({
  frameType, 
  color, 
  size = 'medium', 
  className = '',
  style = {},
  children,
  stretchMode = 'full'
}: DynamicFrameProps) {
  const { frameColor: contextColor } = useFrameColor();
  const actualColor = color || contextColor;
  const frameColor = FRAME_COLORS[actualColor as keyof typeof FRAME_COLORS] || FRAME_COLORS.gold;
  const frameSize = size === 'custom' ? '' : FRAME_SIZES[size];

  // Генерируем SVG с нужным цветом и затемнением
  const getFrameSvg = () => {
    let baseSvg: string;
    switch (frameType) {
      case 'ability':
        baseSvg = ABILITY_FRAME_SVG(frameColor);
        break;
      case 'prof':
        baseSvg = PROF_FRAME_SVG(frameColor);
        break;
      case 'health':
        baseSvg = HEALTH_FRAME_SVG(frameColor);
        break;
      case 'initiative':
        baseSvg = INITIATIVE_FRAME_SVG(frameColor);
        break;
      case 'ac':
        baseSvg = AC_FRAME_SVG(frameColor);
        break;
      case 'st':
        baseSvg = ST_FRAME_SVG(frameColor);
        break;
      case 'st-mode':
        baseSvg = ST_MODE_FRAME_SVG(frameColor);
        break;
      case 'senses':
        baseSvg = SENSES_FRAME_SVG(frameColor);
        break;
      case 'skills':
        baseSvg = SKILLS_FRAME_SVG(frameColor);
        break;
      case 'action':
        baseSvg = ACTION_FRAME_SVG(frameColor);
        break;
      case 'condition':
        baseSvg = CONDITION_FRAME_SVG(frameColor);
        break;
      default:
        baseSvg = ABILITY_FRAME_SVG(frameColor);
    }
    
    // Возвращаем оригинальный SVG без затемнения
    return baseSvg;
  };

  // Правильное кодирование UTF-8 для SVG с кириллицей
  const svgContent = getFrameSvg();
  const encodedSvg = encodeURIComponent(svgContent);
  const svgDataUrl = `data:image/svg+xml;charset=utf-8,${encodedSvg}`;

  // Настройки растягивания в зависимости от режима
  const getStretchSettings = () => {
    switch (stretchMode) {
      case 'left-only':
        return {
          backgroundSize: '100% 100%',
          backgroundPosition: 'left center',
          backgroundRepeat: 'no-repeat'
        };
      case 'right-only':
        return {
          backgroundSize: 'auto 100%',
          backgroundPosition: 'right center',
          backgroundRepeat: 'no-repeat'
        };
      case 'center-stretch':
        return {
          backgroundSize: 'contain',
          backgroundPosition: 'center',
          backgroundRepeat: 'no-repeat'
        };
      case 'full':
      default:
        return {
          backgroundSize: '100% 100%',
          backgroundPosition: 'center',
          backgroundRepeat: 'no-repeat'
        };
    }
  };


  // Специальная обработка для режима left-only
  if (frameType === 'st-mode' && stretchMode === 'left-only') {
    // Создаем SVG только для левой части (без круга)
    const leftOnlySvg = `<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 400 189.05" preserveAspectRatio="none" style="enable-background:new 0 0 400 189.05;" xml:space="preserve">
<style type="text/css">
	.st0{opacity:0.502;fill:${frameColor};}
</style>
<g>
	<path style="opacity:0.502;fill:${frameColor};" d="
		M424.82,33.54c4.61-5.12,9.74-9.74,15.37-13.32h27.16C450.96,26.88,436.61,30.98,424.82,33.54z M409.96,30.98
		c-1.54,2.05-2.56,3.59-4.1,5.64c-19.99,2.05-32.28-2.05-39.46-5.64H409.96z M7.17,58.65c10.76-6.66,21.52-22.04,25.11-27.67h28.18
		c-16.91,7.17-41,19.99-53.3,37.41V58.65z M32.28,158.07c-3.59-5.64-14.35-21.01-25.11-27.67v-9.74
		c11.79,17.42,36.38,30.24,53.3,37.41H32.28z M405.86,152.43c1.54,2.05,2.56,3.59,4.1,5.64H366.4
		C373.58,154.48,385.88,150.38,405.86,152.43z M440.2,168.83c-5.64-4.1-10.76-8.71-15.37-13.32c12.3,2.56,26.14,6.66,42.53,13.32
		H440.2z M392.54,42.25c3.07,0,6.66,0,10.25,0c-9.22,15.89-14.35,33.82-14.35,52.78s5.12,36.9,14.86,52.78
		c-3.59,0-6.66-0.51-10.25,0c-3.07-5.12-15.89-26.65-15.89-52.27S389.47,47.38,392.54,42.25z M357.69,30.98
		c4.1,3.59,12.81,9.22,29.21,10.76c-4.61,7.69-15.37,28.19-15.37,52.78c0,24.6,10.25,45.1,15.37,52.78
		c-16.4,1.54-25.11,7.17-29.21,10.76H73.79c-15.89-5.64-56.88-23.06-66.11-47.66V78.64c9.74-24.6,50.73-41.51,66.11-47.66H357.69z
		 M584.71,94.52c0,29.72-14.86,57.39-38.95,74.31h-52.78c-24.09-10.76-56.88-16.4-73.28-19.47c-11.79-15.37-18.96-34.85-18.96-54.83
		c0-19.99,6.66-39.46,18.96-54.83c15.89-3.07,48.68-8.71,73.28-19.47h52.78C570.36,37.13,584.71,64.8,584.71,94.52z M547.3,7.41
		H434.56l-1.54,1.03c-6.15,4.1-11.79,8.71-16.4,13.84H29.21l-1.54,2.05C24.09,30.47,12.3,47.38,2.56,51.99L0,53.02v82.5l2.56,1.03
		c9.22,4.61,21.01,21.52,25.11,27.67l1.54,2.05h387.42c5.12,5.12,10.76,9.74,16.4,13.84l1.54,1.03h112.23l1.54-1.03
		c28.7-19.47,46.12-51.25,46.12-86.09c0-34.85-17.42-66.62-46.12-86.09L547.3,7.41z"/>
</g>
</svg>`;

    // Создаем SVG только для круга
    const circleSvg = `<?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 200 189.05" preserveAspectRatio="xMidYMid meet" style="enable-background:new 0 0 200 189.05;" xml:space="preserve">
<style type="text/css">
	.st1{fill:none;stroke:${frameColor};stroke-width:6;}
</style>
<g>
	<path style="fill:none;stroke:${frameColor};stroke-width:6;" d="
		M39.2,17.09h97.06c2.9,0,5.5,0.77,7.47,2.24c15.83,11.83,40.68,40.22,40.68,80.76s-24.85,68.93-40.68,80.76
		c-1.96,1.47-4.57,2.24-7.47,2.24H39.2c-3.4,0-6.46-1.06-8.65-3.05c-15.24-13.77-38.07-43.44-38.07-79.95s22.84-66.18,38.07-79.95
		C32.74,18.15,35.8,17.09,39.2,17.09z"/>
</g>
</svg>`;

    const leftWithDarkening = addDarkeningToSvg(leftOnlySvg, frameColor);
    const circleWithDarkening = addDarkeningToSvg(circleSvg, frameColor);
    
    const leftEncodedSvg = encodeURIComponent(leftWithDarkening);
    const circleEncodedSvg = encodeURIComponent(circleWithDarkening);
    const leftDataUrl = `data:image/svg+xml;charset=utf-8,${leftEncodedSvg}`;
    const circleDataUrl = `data:image/svg+xml;charset=utf-8,${circleEncodedSvg}`;

    return (
      <div 
        className={`${frameSize} ${className}`}
        style={{
          position: 'relative',
          ...style
        }}
      >
        {/* Левая часть - растягивается */}
        <div
          className="absolute inset-0"
          style={{
            backgroundImage: `url('${leftDataUrl}')`,
            backgroundSize: '100% 100%',
            backgroundPosition: 'left center',
            backgroundRepeat: 'no-repeat'
          }}
        />
        {/* Круг справа - компактный */}
        <div
          className="absolute right-0 top-0 h-full w-[200px]"
          style={{
            backgroundImage: `url('${circleDataUrl}')`,
            backgroundSize: 'contain',
            backgroundPosition: 'center',
            backgroundRepeat: 'no-repeat'
          }}
        />
        {children}
      </div>
    );
  }

  const stretchSettings = getStretchSettings();

              return (
                <div 
                  className={`${frameSize} ${className}`}
                  style={{
                    backgroundImage: `url('${svgDataUrl}')`,
                    ...stretchSettings,
                    ...style
                  }}
                >
                  {/* Фон под рамкой для health frame */}
                  {frameType === 'health' && (
                    <div 
                      className="absolute inset-0 -z-50 opacity-50 -mt-[13px] ml-[2px]"
                      style={{
                        backgroundImage: `url('/frames/healthFrameBg.svg')`,
                        backgroundSize: '100% 100%',
                        backgroundPosition: 'center',
                        backgroundRepeat: 'no-repeat',
                        transform: 'scaleX(1.01) scaleY(1.35)',
                        transformOrigin: 'center'
                      }}
                    />
                  )}
                  {children}
                </div>
              );
}

// Экспортируем константы для использования в других компонентах
export { FRAME_COLORS, FRAME_SIZES };
